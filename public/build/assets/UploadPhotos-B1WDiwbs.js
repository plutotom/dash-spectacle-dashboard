import{r as s,j as e,y}from"./app-0DiLhEvu.js";const k=({albums:c,errors:t,success:o})=>{var j;console.log(c),console.log(t),console.log(o);const[x,v]=s.useState(((j=c[0])==null?void 0:j.id)||""),[g,S]=s.useState(null),[r,d]=s.useState(null),[p,w]=s.useState(null),[a,b]=s.useState("google"),[m,h]=s.useState(""),[f,u]=s.useState(null),[N,A]=s.useState(null),C=l=>{if(l.preventDefault(),!m.trim()){u("Album name is required");return}u(null),y.post("/api/create-album",{name:m},{onSuccess:()=>{h(""),A("Album created! Reloading..."),setTimeout(()=>window.location.reload(),1e3)},onError:n=>{u((n==null?void 0:n.name)||"Failed to create album")}})},P=l=>{if(l.preventDefault(),!g)return;const n={...a==="google"&&{albumId:x},photos:Array.from(g)},E=a==="google"?"/api/upload-photos":"/api/upload-photos-local";y.post(E,n,{forceFormData:!0,onProgress:i=>{d(i.percentage)},onSuccess:i=>{w(i.props.results),d(null)},onError:()=>{d(null)}})};return e.jsxs("div",{className:"mx-auto max-w-2xl space-y-8 p-6",children:[e.jsxs("form",{onSubmit:C,className:"mb-8 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("h2",{className:"mb-2 text-lg font-semibold text-gray-800",children:"Create a New Album"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:m,onChange:l=>h(l.target.value),placeholder:"Album name",className:"flex-1 rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:ring-blue-500"}),e.jsx("button",{type:"submit",className:"rounded-md bg-green-600 px-4 py-2 text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Create Album"})]}),f&&e.jsx("div",{className:"mt-2 text-sm text-red-600",children:f}),N&&e.jsx("div",{className:"mt-2 text-sm text-green-600",children:N}),(t==null?void 0:t.album_error)&&e.jsx("div",{className:"mt-2 text-sm text-red-600",children:t.album_error}),o&&e.jsx("div",{className:"mt-2 text-sm text-green-600",children:o})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[t&&Object.values(t).map(l=>e.jsx("div",{className:"mb-4 rounded-lg bg-red-100 p-4 text-red-700",children:l},l)),o&&e.jsx("div",{className:"mb-4 rounded-lg bg-green-100 p-4 text-green-700",children:o}),e.jsx("h1",{className:"mb-6 text-2xl font-bold text-gray-800",children:"Upload Photos"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Upload Type:"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",value:"google",checked:a==="google",onChange:l=>b(l.target.value),className:"form-radio h-4 w-4 text-blue-600"}),e.jsx("span",{className:"ml-2",children:"Google Photos"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",value:"local",checked:a==="local",onChange:l=>b(l.target.value),className:"form-radio h-4 w-4 text-blue-600"}),e.jsx("span",{className:"ml-2",children:"Local Storage"})]})]})]}),a==="google"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"album-select",className:"block text-sm font-medium text-gray-700",children:"Select Album:"}),e.jsx("select",{id:"album-select",name:"album",value:x,onChange:l=>v(l.target.value),className:"w-full rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:ring-blue-500",children:c.map(l=>e.jsxs("option",{value:l.id,children:[l.title," (",l.mediaItemsCount||0," items)"]},l.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"file-input",className:"block text-sm font-medium text-gray-700",children:"Select Photos:"}),e.jsx("input",{id:"file-input",type:"file",multiple:!0,accept:"image/*",onChange:l=>S(l.target.files),className:"w-full rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("button",{type:"submit",className:"w-full rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:["Upload to ",a==="google"?"Google Photos":"Local Storage"]}),r!==null&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("progress",{value:r,max:100,className:"h-2 w-full rounded-full bg-gray-200",children:[r,"%"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[r,"%"]})]}),p&&e.jsxs("div",{className:"mt-6 rounded-lg bg-gray-50 p-4",children:[e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-800",children:"Upload Results"}),e.jsx("pre",{className:"overflow-x-auto text-sm text-gray-600",children:JSON.stringify(p,null,2)})]})]})]})};export{k as default};
//# sourceMappingURL=UploadPhotos-B1WDiwbs.js.map
