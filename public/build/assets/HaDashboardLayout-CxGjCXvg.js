import{r as i,j as s,b as m}from"./app-ieQgo3w9.js";const b=!1,h="https://ucarecdn.com/05f649bf-b70b-4cf8-90f7-2588ce404a08/";function y({children:c}){const[e,t]=i.useState(null),[o,r]=i.useState(!1),[l,n]=i.useState(null),[u,d]=i.useState(!0),p=!1,f=async()=>{try{r(!1);try{const a=await m.get("/api/random-photo-from-dashboard-album");if(a.status===200&&a.data.success){t(a.data.url),r(!1),n(null);return}}catch{console.log("Google Photos fetch failed, trying local photos...")}try{const a=await m.get("/api/random-photo-local");if(a.status===200&&a.data.success){console.log("Local photos fetch successful"),console.log(a.data),t(a.data.url),r(!1),n(null);return}}catch(a){console.error("Local photos fetch failed:",a)}t(h),console.log("Failed to fetch photos from both Google Photos and local storage, using default background"),r(!0),n("Failed to fetch photos from both Google Photos and local storage")}catch(a){console.error("Failed to fetch photo:",a),r(!0),n(a instanceof Error?a.message:"Unknown error"),t(h)}finally{d(!1)}};return i.useEffect(()=>{f();const a=setInterval(f,1e3*60*10);return()=>clearInterval(a)},[]),u?s.jsx("div",{children:"Loading..."}):s.jsx("div",{children:s.jsx("div",{id:"background-image-container",className:"min-h-screen bg-gray-900",style:{backgroundImage:`url(${new URL(e||h).href})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",transition:"background-image 1s ease-in-out"},children:s.jsx(v,{children:c})})})}function v({children:c}){return s.jsx("div",{className:"",style:{background:`
        linear-gradient(to bottom,
            rgba(0, 0, 0, 0.2) 50%,
            rgba(0, 0, 0, 0) 20%,
            rgba(0, 0, 0, 0) 30%,
            rgba(0, 0, 0, .2) 50%
        )
    `},children:c})}const E=i.createContext(null),g={didCatch:!1,error:null};class x extends i.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=g}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var t,o,r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];(t=(o=this.props).onReset)===null||t===void 0||t.call(o,{args:l,reason:"imperative-api"}),this.setState(g)}}componentDidCatch(e,t){var o,r;(o=(r=this.props).onError)===null||o===void 0||o.call(r,e,t)}componentDidUpdate(e,t){const{didCatch:o}=this.state,{resetKeys:r}=this.props;if(o&&t.error!==null&&j(e.resetKeys,r)){var l,n;(l=(n=this.props).onReset)===null||l===void 0||l.call(n,{next:r,prev:e.resetKeys,reason:"keys"}),this.setState(g)}}render(){const{children:e,fallbackRender:t,FallbackComponent:o,fallback:r}=this.props,{didCatch:l,error:n}=this.state;let u=e;if(l){const d={error:n,resetErrorBoundary:this.resetErrorBoundary};if(typeof t=="function")u=t(d);else if(o)u=i.createElement(o,d);else if(r!==void 0)u=r;else throw n}return i.createElement(E.Provider,{value:{didCatch:l,error:n,resetErrorBoundary:this.resetErrorBoundary}},u)}}function j(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return c.length!==e.length||c.some((t,o)=>!Object.is(t,e[o]))}function k({children:c,intervalMs:e=6e4,fallback:t}){const[o,r]=i.useState(0);return i.useEffect(()=>{if(o===0)return;const l=setTimeout(()=>r(n=>n+1),e);return()=>clearTimeout(l)},[o,e]),s.jsx(x,{fallbackRender:()=>t??s.jsxs("div",{children:["Something went wrong. Retrying in ",e/6e4," minutes..."]}),onReset:()=>r(l=>l+1),resetKeys:[o],children:c})}function C({children:c}){return s.jsx(s.Fragment,{children:s.jsx(k,{fallback:s.jsx("div",{className:"relative",children:s.jsx("main",{children:c})}),children:s.jsx(y,{children:s.jsx("div",{className:"relative",children:s.jsx("main",{children:c})})})})})}export{C as H,k as R};
//# sourceMappingURL=HaDashboardLayout-CxGjCXvg.js.map
