{"version":3,"file":"Manage-Cew9teII.js","sources":["../../../resources/js/Pages/Users/Manage.tsx"],"sourcesContent":["import AuthenticatedLayout from '@/Layouts/AuthenticatedLayout';\nimport type { User as AppUser, PageProps } from '@/types';\nimport { Head, router, usePage } from '@inertiajs/react';\n\ntype User = {\n    id: number;\n    name: string;\n    first_name?: string;\n    last_name?: string;\n    email: string;\n    role?: 'admin' | 'user' | string;\n};\n\ntype PaginationLink = { url: string | null; label: string; active: boolean };\n\nexport default function Manage({ users }: { users: { data: User[]; links: PaginationLink[] } }) {\n    const page = usePage<PageProps>();\n    const authUser = page.props.auth?.user as (AppUser & { role?: string }) | undefined;\n    // We'll use router.put/delete to send data payloads\n\n    return (\n        <AuthenticatedLayout header={<h2 className=\"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200\">Manage Users</h2>}>\n            <Head title=\"Manage Users\" />\n\n            <div className=\"mx-auto max-w-5xl space-y-4 p-4\">\n                {authUser?.role !== 'admin' && <div className=\"rounded bg-yellow-100 p-3 text-yellow-900\">You do not have permission to manage users.</div>}\n\n                {authUser?.role === 'admin' && (\n                    <div className=\"overflow-x-auto rounded border\">\n                        <table className=\"min-w-full divide-y divide-gray-200\">\n                            <thead className=\"bg-gray-50\">\n                                <tr>\n                                    <th className=\"px-3 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500\">ID</th>\n                                    <th className=\"px-3 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500\">Name</th>\n                                    <th className=\"px-3 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500\">Email</th>\n                                    <th className=\"px-3 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500\">Role</th>\n                                    <th className=\"px-3 py-2\"></th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"divide-y divide-gray-200 bg-white\">\n                                {users.data.map((u) => (\n                                    <tr key={u.id} className=\"align-top\">\n                                        <td className=\"px-3 py-2 text-sm text-gray-700\">{u.id}</td>\n                                        <td className=\"px-3 py-2\">\n                                            <form\n                                                onSubmit={(e) => {\n                                                    e.preventDefault();\n                                                    const data = new FormData(e.currentTarget);\n                                                    const password = String(data.get('password') || '');\n                                                    const passwordConfirmation = String(data.get('password_confirmation') || '');\n\n                                                    // Only include password if both fields are filled and match\n                                                    const formData: Record<string, string> = {\n                                                        name: String(data.get('name') || ''),\n                                                        first_name: String(data.get('first_name') || ''),\n                                                        last_name: String(data.get('last_name') || ''),\n                                                        email: String(data.get('email') || ''),\n                                                        role: String(data.get('role') || 'user'),\n                                                    };\n\n                                                    if (password && password === passwordConfirmation) {\n                                                        formData.password = password;\n                                                        formData.password_confirmation = passwordConfirmation;\n                                                    } else if (password || passwordConfirmation) {\n                                                        alert('Passwords do not match or are incomplete');\n                                                        return;\n                                                    }\n\n                                                    router.put(route('users.update', { user: u.id }), formData, {\n                                                        headers: {\n                                                            'X-CSRF-TOKEN':\n                                                                (document.querySelector('meta[name=\"csrf-token\"]') as HTMLMetaElement)?.content || '',\n                                                        },\n                                                        onError: (errors) => {\n                                                            console.error('Validation errors:', errors);\n                                                            alert('Please check the form for errors: ' + Object.values(errors).flat().join(', '));\n                                                        },\n                                                        onSuccess: () => {\n                                                            alert('User updated successfully!');\n                                                        },\n                                                    });\n                                                }}\n                                                className=\"flex flex-col gap-2 md:flex-row md:items-center\"\n                                            >\n                                                <input name=\"name\" defaultValue={u.name} className=\"rounded border p-2 text-sm\" placeholder=\"Name\" />\n                                                <input\n                                                    name=\"first_name\"\n                                                    defaultValue={u.first_name || ''}\n                                                    className=\"rounded border p-2 text-sm\"\n                                                    placeholder=\"First\"\n                                                />\n                                                <input\n                                                    name=\"last_name\"\n                                                    defaultValue={u.last_name || ''}\n                                                    className=\"rounded border p-2 text-sm\"\n                                                    placeholder=\"Last\"\n                                                />\n                                                <input\n                                                    name=\"email\"\n                                                    defaultValue={u.email}\n                                                    className=\"min-w-[220px] rounded border p-2 text-sm\"\n                                                    placeholder=\"Email\"\n                                                />\n                                                <select name=\"role\" defaultValue={u.role || 'user'} className=\"rounded border p-2 text-sm\">\n                                                    <option value=\"user\">user</option>\n                                                    <option value=\"admin\">admin</option>\n                                                </select>\n                                                <input\n                                                    name=\"password\"\n                                                    type=\"password\"\n                                                    className=\"rounded border p-2 text-sm\"\n                                                    placeholder=\"New password (optional)\"\n                                                />\n                                                <input\n                                                    name=\"password_confirmation\"\n                                                    type=\"password\"\n                                                    className=\"rounded border p-2 text-sm\"\n                                                    placeholder=\"Confirm password\"\n                                                />\n                                                <button className=\"rounded bg-green-600 px-3 py-2 text-sm text-white\">Save</button>\n                                            </form>\n                                        </td>\n                                        <td className=\"px-3 py-2\"></td>\n                                        <td className=\"px-3 py-2\"></td>\n                                        <td className=\"px-3 py-2 text-right\">\n                                            <button\n                                                onClick={() => {\n                                                    if (confirm('Are you sure you want to delete this user?')) {\n                                                        router.delete(route('users.destroy', { user: u.id }), {\n                                                            onSuccess: () => {\n                                                                alert('User deleted successfully!');\n                                                            },\n                                                        });\n                                                    }\n                                                }}\n                                                className=\"rounded bg-red-600 px-3 py-2 text-sm text-white\"\n                                            >\n                                                Delete\n                                            </button>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n                )}\n            </div>\n        </AuthenticatedLayout>\n    );\n}\n"],"names":["Manage","users","authUser","_a","usePage","jsxs","AuthenticatedLayout","jsx","Head","u","e","data","password","passwordConfirmation","formData","router","errors"],"mappings":"oNAewB,SAAAA,EAAO,CAAE,MAAAC,GAA+D,OAEtF,MAAAC,GAAWC,EADJC,EAAmB,EACV,MAAM,OAAX,YAAAD,EAAiB,KAI9B,OAAAE,EAAA,KAACC,GAAoB,OAAQC,EAAA,IAAC,MAAG,UAAU,uEAAuE,uBAAY,CAAA,EAC1H,SAAA,CAACA,EAAAA,IAAAC,EAAA,CAAK,MAAM,cAAe,CAAA,EAE3BH,EAAAA,KAAC,MAAI,CAAA,UAAU,kCACV,SAAA,EAAAH,GAAA,YAAAA,EAAU,QAAS,SAAWK,MAAC,MAAI,CAAA,UAAU,4CAA4C,SAA2C,8CAAA,GAEpIL,GAAA,YAAAA,EAAU,QAAS,SACfK,EAAAA,IAAA,MAAA,CAAI,UAAU,iCACX,SAAAF,EAAA,KAAC,QAAM,CAAA,UAAU,sCACb,SAAA,CAAAE,MAAC,QAAM,CAAA,UAAU,aACb,SAAAF,EAAA,KAAC,KACG,CAAA,SAAA,CAACE,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAAE,KAAA,EAChGA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAAI,OAAA,EAClGA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAAK,QAAA,EACnGA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAAI,OAAA,EACnGA,EAAAA,IAAC,KAAG,CAAA,UAAU,WAAY,CAAA,CAAA,CAAA,CAC9B,CACJ,CAAA,EACCA,EAAA,IAAA,QAAA,CAAM,UAAU,oCACZ,SAAMN,EAAA,KAAK,IAAKQ,GACbJ,EAAAA,KAAC,KAAc,CAAA,UAAU,YACrB,SAAA,CAAAE,EAAA,IAAC,KAAG,CAAA,UAAU,kCAAmC,SAAAE,EAAE,GAAG,EACtDF,EAAAA,IAAC,KAAG,CAAA,UAAU,YACV,SAAAF,EAAA,KAAC,OAAA,CACG,SAAWK,GAAM,OACbA,EAAE,eAAe,EACjB,MAAMC,EAAO,IAAI,SAASD,EAAE,aAAa,EACnCE,EAAW,OAAOD,EAAK,IAAI,UAAU,GAAK,EAAE,EAC5CE,EAAuB,OAAOF,EAAK,IAAI,uBAAuB,GAAK,EAAE,EAGrEG,EAAmC,CACrC,KAAM,OAAOH,EAAK,IAAI,MAAM,GAAK,EAAE,EACnC,WAAY,OAAOA,EAAK,IAAI,YAAY,GAAK,EAAE,EAC/C,UAAW,OAAOA,EAAK,IAAI,WAAW,GAAK,EAAE,EAC7C,MAAO,OAAOA,EAAK,IAAI,OAAO,GAAK,EAAE,EACrC,KAAM,OAAOA,EAAK,IAAI,MAAM,GAAK,MAAM,CAC3C,EAEI,GAAAC,GAAYA,IAAaC,EACzBC,EAAS,SAAWF,EACpBE,EAAS,sBAAwBD,UAC1BD,GAAYC,EAAsB,CACzC,MAAM,0CAA0C,EAChD,MAAA,CAGGE,EAAA,IAAI,MAAM,eAAgB,CAAE,KAAMN,EAAE,GAAI,EAAGK,EAAU,CACxD,QAAS,CACL,iBACKX,EAAA,SAAS,cAAc,yBAAyB,IAAhD,YAAAA,EAAuE,UAAW,EAC3F,EACA,QAAUa,GAAW,CACT,QAAA,MAAM,qBAAsBA,CAAM,EACpC,MAAA,qCAAuC,OAAO,OAAOA,CAAM,EAAE,KAAK,EAAE,KAAK,IAAI,CAAC,CACxF,EACA,UAAW,IAAM,CACb,MAAM,4BAA4B,CAAA,CACtC,CACH,CACL,EACA,UAAU,kDAEV,SAAA,CAACT,EAAAA,IAAA,QAAA,CAAM,KAAK,OAAO,aAAcE,EAAE,KAAM,UAAU,6BAA6B,YAAY,MAAO,CAAA,EACnGF,EAAA,IAAC,QAAA,CACG,KAAK,aACL,aAAcE,EAAE,YAAc,GAC9B,UAAU,6BACV,YAAY,OAAA,CAChB,EACAF,EAAA,IAAC,QAAA,CACG,KAAK,YACL,aAAcE,EAAE,WAAa,GAC7B,UAAU,6BACV,YAAY,MAAA,CAChB,EACAF,EAAA,IAAC,QAAA,CACG,KAAK,QACL,aAAcE,EAAE,MAChB,UAAU,2CACV,YAAY,OAAA,CAChB,EACAJ,EAAAA,KAAC,UAAO,KAAK,OAAO,aAAcI,EAAE,MAAQ,OAAQ,UAAU,6BAC1D,SAAA,CAACF,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAI,OAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAK,OAAA,CAAA,CAAA,EAC/B,EACAA,EAAA,IAAC,QAAA,CACG,KAAK,WACL,KAAK,WACL,UAAU,6BACV,YAAY,yBAAA,CAChB,EACAA,EAAA,IAAC,QAAA,CACG,KAAK,wBACL,KAAK,WACL,UAAU,6BACV,YAAY,kBAAA,CAChB,EACCA,EAAA,IAAA,SAAA,CAAO,UAAU,oDAAoD,SAAI,MAAA,CAAA,CAAA,CAAA,CAAA,EAElF,EACAA,EAAAA,IAAC,KAAG,CAAA,UAAU,WAAY,CAAA,EAC1BA,EAAAA,IAAC,KAAG,CAAA,UAAU,WAAY,CAAA,EAC1BA,EAAAA,IAAC,KAAG,CAAA,UAAU,uBACV,SAAAA,EAAA,IAAC,SAAA,CACG,QAAS,IAAM,CACP,QAAQ,4CAA4C,GAC7CQ,EAAA,OAAO,MAAM,gBAAiB,CAAE,KAAMN,EAAE,EAAA,CAAI,EAAG,CAClD,UAAW,IAAM,CACb,MAAM,4BAA4B,CAAA,CACtC,CACH,CAET,EACA,UAAU,kDACb,SAAA,QAAA,CAAA,CAGL,CAAA,CAAA,GAlGKA,EAAE,EAmGX,CACH,CACL,CAAA,CAAA,CAAA,CACJ,CACJ,CAAA,CAAA,CAER,CAAA,CAAA,EACJ,CAER"}