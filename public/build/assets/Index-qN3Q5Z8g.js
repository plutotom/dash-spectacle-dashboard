import{r as t,j as e,Y as A,b as o}from"./app-DEbPEzRX.js";import{A as S}from"./AuthenticatedLayout-CbFID8pA.js";import"./ApplicationLogo-kLBtd4O1.js";import"./transition-BwS6nM2I.js";import"./utils-BD4OweYj.js";function L(){const[b,j]=t.useState([]),[g,y]=t.useState(!0),[w,c]=t.useState(null),[s,f]=t.useState({current_page:1,last_page:1,per_page:15,total:0}),[x,u]=t.useState("all"),[N,m]=t.useState(!1),[p,h]=t.useState(null),[r,n]=t.useState({name:"",person:"",prayer_date:"",answer:"",is_answered:!1}),i=async(a=1)=>{try{y(!0);const d=(await o.get(`/prayer-requests/manage/data?page=${a}&filter=${x}`)).data;j(d.data),f({current_page:d.current_page,last_page:d.last_page,per_page:d.per_page,total:d.total}),c(null)}catch(l){c("Failed to fetch prayer requests"),console.error(l)}finally{y(!1)}};t.useEffect(()=>{i()},[x]);const v=async a=>{a.preventDefault();try{p?await o.put(`/prayer-requests/${p.id}`,r):await o.post("/prayer-requests",r),m(!1),h(null),n({name:"",person:"",prayer_date:"",answer:"",is_answered:!1}),i(s.current_page)}catch(l){c("Failed to save prayer request"),console.error(l)}},_=a=>{h(a),n({name:a.name||"",person:a.person||"",prayer_date:a.prayer_date||"",answer:a.answer||"",is_answered:a.is_answered}),m(!0)},k=async a=>{if(confirm("Are you sure you want to delete this prayer request?"))try{await o.delete(`/prayer-requests/${a}`),i(s.current_page)}catch(l){c("Failed to delete prayer request"),console.error(l)}},C=async(a,l)=>{try{l?await o.post(`/prayer-requests/${a}/mark-unanswered`):await o.post(`/prayer-requests/${a}/mark-answered`),i(s.current_page)}catch(d){c("Failed to update prayer request"),console.error(d)}},P=()=>{m(!1),h(null),n({name:"",person:"",prayer_date:"",answer:"",is_answered:!1})};return e.jsxs(S,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Prayer Requests"}),children:[e.jsx(A,{title:"Prayer Requests"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Prayer Requests"}),e.jsx("button",{onClick:()=>m(!0),className:"rounded bg-blue-500 px-4 py-2 font-bold text-white hover:bg-blue-700",children:"Add Prayer Request"})]}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>u("all"),className:`rounded px-4 py-2 ${x==="all"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:["All (",s.total,")"]}),e.jsx("button",{onClick:()=>u("unanswered"),className:`rounded px-4 py-2 ${x==="unanswered"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:"Unanswered"}),e.jsx("button",{onClick:()=>u("answered"),className:`rounded px-4 py-2 ${x==="answered"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:"Answered"})]}),N&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:p?"Edit Prayer Request":"Add Prayer Request"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Name *"}),e.jsx("input",{type:"text",value:r.name,onChange:a=>n({...r,name:a.target.value}),className:"w-full rounded border border-gray-300 px-3 py-2",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Person"}),e.jsx("input",{type:"text",value:r.person,onChange:a=>n({...r,person:a.target.value}),className:"w-full rounded border border-gray-300 px-3 py-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Prayer Date"}),e.jsx("input",{type:"date",value:r.prayer_date,onChange:a=>n({...r,prayer_date:a.target.value}),className:"w-full rounded border border-gray-300 px-3 py-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Answer"}),e.jsx("textarea",{value:r.answer,onChange:a=>n({...r,answer:a.target.value}),className:"w-full rounded border border-gray-300 px-3 py-2",rows:3})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.is_answered,onChange:a=>n({...r,is_answered:a.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Is Answered"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"rounded bg-green-500 px-4 py-2 font-bold text-white hover:bg-green-700",children:p?"Update":"Create"}),e.jsx("button",{type:"button",onClick:P,className:"rounded bg-gray-500 px-4 py-2 font-bold text-white hover:bg-gray-700",children:"Cancel"})]})]})]})}),w&&e.jsx("div",{className:"mb-4 rounded border border-red-400 bg-red-100 px-4 py-3 text-red-700",children:w}),g&&e.jsx("div",{className:"py-4 text-center",children:"Loading..."}),!g&&e.jsx("div",{className:"space-y-4",children:b.length===0?e.jsx("div",{className:"py-8 text-center text-gray-500",children:"No prayer requests found."}):b.map(a=>e.jsx("div",{className:`rounded-lg border p-4 ${a.is_answered?"border-green-200 bg-green-50":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx("h3",{className:`text-lg font-semibold ${a.is_answered?"text-gray-500 line-through":""}`,children:a.name||"Unnamed"}),e.jsx("span",{className:"text-xl",children:a.is_answered?"âœ…":"ðŸ™"})]}),a.person&&e.jsxs("p",{className:"mb-1 text-sm text-gray-600",children:[e.jsx("strong",{children:"Person:"})," ",a.person]}),a.answer&&e.jsxs("p",{className:"mb-1 text-sm text-green-700",children:[e.jsx("strong",{children:"Answer:"})," ",a.answer]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[a.prayer_date&&e.jsxs("span",{children:["Prayer Date: ",new Date(a.prayer_date).toLocaleDateString()]}),a.answered_at&&e.jsxs("span",{className:"ml-4",children:["Answered: ",new Date(a.answered_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"ml-4 flex gap-2",children:[e.jsx("button",{onClick:()=>_(a),className:"rounded bg-blue-500 px-2 py-1 text-xs text-white hover:bg-blue-700",children:"Edit"}),e.jsxs("button",{onClick:()=>C(a.id,a.is_answered),className:`rounded px-2 py-1 text-xs ${a.is_answered?"bg-yellow-500 text-white hover:bg-yellow-700":"bg-green-500 text-white hover:bg-green-700"}`,children:[a.is_answered?"Unmark":"Mark"," Answered"]}),e.jsx("button",{onClick:()=>k(a.id),className:"rounded bg-red-500 px-2 py-1 text-xs text-white hover:bg-red-700",children:"Delete"})]})]})},a.id))}),!g&&s.last_page>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>i(s.current_page-1),disabled:s.current_page===1,className:"rounded border border-gray-300 px-3 py-2 disabled:cursor-not-allowed disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"px-3 py-2",children:["Page ",s.current_page," of ",s.last_page]}),e.jsx("button",{onClick:()=>i(s.current_page+1),disabled:s.current_page===s.last_page,className:"rounded border border-gray-300 px-3 py-2 disabled:cursor-not-allowed disabled:opacity-50",children:"Next"})]})})]})})})})]})}export{L as default};
//# sourceMappingURL=Index-qN3Q5Z8g.js.map
