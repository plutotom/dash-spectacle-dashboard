import{r as a,q as j,j as e,Y as $,b as i}from"./app-D5oOWmzX.js";import{A as P}from"./AuthenticatedLayout-Cm_iJYti.js";import"./ApplicationLogo-CERoi-q8.js";import"./transition-B0P8yshR.js";import"./utils-BD4OweYj.js";function I(){var _,w;const[h,N]=a.useState([]),[m,b]=a.useState(!0),[f,c]=a.useState(null),[s,v]=a.useState({current_page:1,last_page:1,per_page:15,total:0}),[x,g]=a.useState("all"),[k,p]=a.useState(!1),[u,y]=a.useState(null);console.log(j().props);const[t,d]=a.useState({prayer_request_from:((w=(_=j().props.auth)==null?void 0:_.user)==null?void 0:w.first_name)||"Unnamed",prayer_for:"",prayer_request:"",is_answered:!1}),o=async(r=1)=>{try{b(!0);const n=(await i.get(`/prayer-requests/manage/data?page=${r}&filter=${x}`)).data;N(n.data),v({current_page:n.current_page,last_page:n.last_page,per_page:n.per_page,total:n.total}),c(null)}catch(l){c("Failed to fetch prayer requests"),console.error(l)}finally{b(!1)}};a.useEffect(()=>{o()},[x]);const q=async r=>{r.preventDefault();try{u?await i.put(`/prayer-requests/${u.id}`,t):await i.post("/prayer-requests",t),p(!1),y(null),d({prayer_request_from:"",prayer_for:"",prayer_request:"",is_answered:!1}),o(s.current_page)}catch(l){c("Failed to save prayer request"),console.error(l)}},C=r=>{y(r),d({prayer_request_from:r.prayer_request_from||"",prayer_for:r.prayer_for||"",prayer_request:r.prayer_request||"",is_answered:r.is_answered}),p(!0)},R=async r=>{if(confirm("Are you sure you want to delete this prayer request?"))try{await i.delete(`/prayer-requests/${r}`),o(s.current_page)}catch(l){c("Failed to delete prayer request"),console.error(l)}},A=async(r,l)=>{try{l?await i.post(`/prayer-requests/${r}/mark-unanswered`):await i.post(`/prayer-requests/${r}/mark-answered`),o(s.current_page)}catch(n){c("Failed to update prayer request"),console.error(n)}},S=()=>{p(!1),y(null),d({prayer_request_from:"",prayer_for:"",prayer_request:"",is_answered:!1})};return e.jsxs(P,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Prayer Requests"}),children:[e.jsx($,{title:"Prayer Requests"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Prayer Requests"}),e.jsx("button",{onClick:()=>p(!0),className:"rounded bg-blue-500 px-4 py-2 font-bold text-white hover:bg-blue-700",children:"Add Prayer Request"})]}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>g("all"),className:`rounded px-4 py-2 ${x==="all"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:["All (",s.total,")"]}),e.jsx("button",{onClick:()=>g("unanswered"),className:`rounded px-4 py-2 ${x==="unanswered"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:"Unanswered"}),e.jsx("button",{onClick:()=>g("answered"),className:`rounded px-4 py-2 ${x==="answered"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:"Answered"})]}),k&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:u?"Edit Prayer Request":"Add Prayer Request"}),e.jsxs("form",{onSubmit:q,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Who is requesting prayer?"}),e.jsx("input",{type:"text",value:t.prayer_for,onChange:r=>d({...t,prayer_for:r.target.value}),className:"w-full rounded border border-gray-300 px-3 py-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Prayer Request"}),e.jsx("textarea",{value:t.prayer_request,onChange:r=>d({...t,prayer_request:r.target.value}),className:"w-full rounded border border-gray-300 px-3 py-2",rows:3})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.is_answered,onChange:r=>d({...t,is_answered:r.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Is Answered"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"rounded bg-green-500 px-4 py-2 font-bold text-white hover:bg-green-700",children:u?"Update":"Create"}),e.jsx("button",{type:"button",onClick:S,className:"rounded bg-gray-500 px-4 py-2 font-bold text-white hover:bg-gray-700",children:"Cancel"})]})]})]})}),f&&e.jsx("div",{className:"mb-4 rounded border border-red-400 bg-red-100 px-4 py-3 text-red-700",children:f}),m&&e.jsx("div",{className:"py-4 text-center",children:"Loading..."}),!m&&e.jsx("div",{className:"space-y-4",children:h.length===0?e.jsx("div",{className:"py-8 text-center text-gray-500",children:"No prayer requests found."}):h.map(r=>e.jsx("div",{className:`rounded-lg border p-4 ${r.is_answered?"border-green-200 bg-green-50":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx("h3",{className:`text-lg font-semibold ${r.is_answered?"text-gray-500 line-through":""}`,children:r.prayer_request_from||"Unnamed"}),e.jsx("span",{className:"text-xl",children:r.is_answered?"âœ…":"ðŸ™"})]}),r.prayer_for&&e.jsxs("p",{className:"mb-1 text-sm text-gray-600",children:[e.jsx("strong",{children:"For:"})," ",r.prayer_for]}),r.prayer_request&&e.jsxs("p",{className:"mb-1 text-sm text-green-700",children:[e.jsx("strong",{children:"Answer:"})," ",r.prayer_request]}),e.jsx("div",{className:"text-xs text-gray-500",children:r.answered_at&&e.jsxs("span",{children:["Answered: ",new Date(r.answered_at).toLocaleDateString()]})})]}),e.jsxs("div",{className:"ml-4 flex gap-2",children:[e.jsx("button",{onClick:()=>C(r),className:"rounded bg-blue-500 px-2 py-1 text-xs text-white hover:bg-blue-700",children:"Edit"}),e.jsxs("button",{onClick:()=>A(r.id,r.is_answered),className:`rounded px-2 py-1 text-xs ${r.is_answered?"bg-yellow-500 text-white hover:bg-yellow-700":"bg-green-500 text-white hover:bg-green-700"}`,children:[r.is_answered?"Unmark":"Mark"," Answered"]}),e.jsx("button",{onClick:()=>R(r.id),className:"rounded bg-red-500 px-2 py-1 text-xs text-white hover:bg-red-700",children:"Delete"})]})]})},r.id))}),!m&&s.last_page>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>o(s.current_page-1),disabled:s.current_page===1,className:"rounded border border-gray-300 px-3 py-2 disabled:cursor-not-allowed disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"px-3 py-2",children:["Page ",s.current_page," of ",s.last_page]}),e.jsx("button",{onClick:()=>o(s.current_page+1),disabled:s.current_page===s.last_page,className:"rounded border border-gray-300 px-3 py-2 disabled:cursor-not-allowed disabled:opacity-50",children:"Next"})]})})]})})})})]})}export{I as default};
//# sourceMappingURL=Index-D-y-viCa.js.map
