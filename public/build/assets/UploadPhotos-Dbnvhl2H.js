import{r as l,j as e,y as N}from"./app-DXYFIr3q.js";const E=({albums:r,errors:s,success:a})=>{var f;console.log(r),console.log(s),console.log(a);const[u,j]=l.useState(((f=r[0])==null?void 0:f.id)||""),[x,y]=l.useState(null),[n,m]=l.useState(null),[b,v]=l.useState(null),[d,g]=l.useState(""),[p,c]=l.useState(null),[h,S]=l.useState(null),w=t=>{if(t.preventDefault(),!d.trim()){c("Album name is required");return}c(null),N.post("/api/create-album",{name:d},{onSuccess:()=>{g(""),S("Album created! Reloading..."),setTimeout(()=>window.location.reload(),1e3)},onError:o=>{c((o==null?void 0:o.name)||"Failed to create album")}})},A=t=>{if(t.preventDefault(),!x||!u)return;const o={albumId:u,photos:Array.from(x)};N.post("/api/upload-photos",o,{forceFormData:!0,onProgress:i=>{m(i.percentage)},onSuccess:i=>{v(i.props.results),m(null)},onError:()=>{m(null)}})};return e.jsxs("div",{className:"mx-auto max-w-2xl space-y-8 p-6",children:[e.jsxs("form",{onSubmit:w,className:"mb-8 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("h2",{className:"mb-2 text-lg font-semibold text-gray-800",children:"Create a New Album"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:d,onChange:t=>g(t.target.value),placeholder:"Album name",className:"flex-1 rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:ring-blue-500"}),e.jsx("button",{type:"submit",className:"rounded-md bg-green-600 px-4 py-2 text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Create Album"})]}),p&&e.jsx("div",{className:"mt-2 text-sm text-red-600",children:p}),h&&e.jsx("div",{className:"mt-2 text-sm text-green-600",children:h}),(s==null?void 0:s.album_error)&&e.jsx("div",{className:"mt-2 text-sm text-red-600",children:s.album_error}),a&&e.jsx("div",{className:"mt-2 text-sm text-green-600",children:a})]}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[s&&Object.values(s).map(t=>e.jsx("div",{className:"mb-4 rounded-lg bg-red-100 p-4 text-red-700",children:t},t)),a&&e.jsx("div",{className:"mb-4 rounded-lg bg-green-100 p-4 text-green-700",children:a}),e.jsx("h1",{className:"mb-6 text-2xl font-bold text-gray-800",children:"Upload Photos to Google Photos"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"album-select",className:"block text-sm font-medium text-gray-700",children:"Select Album:"}),e.jsx("select",{id:"album-select",name:"album",value:u,onChange:t=>j(t.target.value),className:"w-full rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:ring-blue-500",children:r.map(t=>e.jsxs("option",{value:t.id,children:[t.title," (",t.mediaItemsCount||0," items)"]},t.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"file-input",className:"block text-sm font-medium text-gray-700",children:"Select Photos:"}),e.jsx("input",{id:"file-input",type:"file",multiple:!0,accept:"image/*",onChange:t=>y(t.target.files),className:"w-full rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsx("button",{type:"submit",className:"w-full rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Upload"}),n!==null&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("progress",{value:n,max:100,className:"h-2 w-full rounded-full bg-gray-200",children:[n,"%"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[n,"%"]})]}),b&&e.jsxs("div",{className:"mt-6 rounded-lg bg-gray-50 p-4",children:[e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-800",children:"Upload Results"}),e.jsx("pre",{className:"overflow-x-auto text-sm text-gray-600",children:JSON.stringify(b,null,2)})]})]})]})};export{E as default};
//# sourceMappingURL=UploadPhotos-Dbnvhl2H.js.map
