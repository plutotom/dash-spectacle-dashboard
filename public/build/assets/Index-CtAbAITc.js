import{q as D,r as a,b as c,j as e,Y as E}from"./app-1Ne8dYhP.js";import{A as U}from"./AuthenticatedLayout-QlldKgDx.js";import"./ApplicationLogo-JEHpRrBg.js";import"./transition-BQ_5IBG0.js";import"./utils-BD4OweYj.js";function Y(){var _,N;const{props:b}=D(),v=((N=(_=b.auth)==null?void 0:_.user)==null?void 0:N.first_name)||"Unnamed",[f,k]=a.useState([]),[h,w]=a.useState(!0),[j,x]=a.useState(null),[s,q]=a.useState({current_page:1,last_page:1,per_page:15,total:0}),[i,y]=a.useState("all"),[C,p]=a.useState(!1),[u,m]=a.useState(null);console.log(b);const g=()=>({prayer_request_from:v,prayer_for:"",prayer_request:"",is_answered:!1}),[t,n]=a.useState(g()),d=a.useCallback(async(r=1)=>{try{w(!0);const o=(await c.get(`/prayer-requests/manage/data?page=${r}&filter=${i}`)).data;k(o.data),q({current_page:o.current_page,last_page:o.last_page,per_page:o.per_page,total:o.total}),x(null)}catch(l){x("Failed to fetch prayer requests"),console.error(l)}finally{w(!1)}},[i]);a.useEffect(()=>{d()},[i,d]);const A=async r=>{r.preventDefault();try{u?await c.put(`/prayer-requests/${u.id}`,t):await c.post("/prayer-requests",t),p(!1),m(null),n(g()),d(s.current_page)}catch(l){x("Failed to save prayer request"),console.error(l)}},R=r=>{m(r),n({prayer_request_from:r.prayer_request_from||"",prayer_for:r.prayer_for||"",prayer_request:r.prayer_request||"",is_answered:r.is_answered}),p(!0)},S=async r=>{if(confirm("Are you sure you want to delete this prayer request?"))try{await c.delete(`/prayer-requests/${r}`),d(s.current_page)}catch(l){x("Failed to delete prayer request"),console.error(l)}},$=async(r,l)=>{try{l?await c.post(`/prayer-requests/${r}/mark-unanswered`):await c.post(`/prayer-requests/${r}/mark-answered`),d(s.current_page)}catch(o){x("Failed to update prayer request"),console.error(o)}},F=()=>{p(!1),m(null),n(g())},P=()=>{m(null),n(g()),p(!0)};return e.jsxs(U,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Prayer Requests"}),children:[e.jsx(E,{title:"Prayer Requests"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Prayer Requests"}),e.jsx("button",{onClick:P,className:"rounded bg-blue-500 px-4 py-2 font-bold text-white hover:bg-blue-700",children:"Add Prayer Request"})]}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>y("all"),className:`rounded px-4 py-2 ${i==="all"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:["All (",s.total,")"]}),e.jsx("button",{onClick:()=>y("unanswered"),className:`rounded px-4 py-2 ${i==="unanswered"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:"Unanswered"}),e.jsx("button",{onClick:()=>y("answered"),className:`rounded px-4 py-2 ${i==="answered"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:"Answered"})]}),C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:u?"Edit Prayer Request":"Add Prayer Request"}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Who is requesting prayer?"}),e.jsx("input",{type:"text",value:t.prayer_for,onChange:r=>n({...t,prayer_for:r.target.value}),className:"w-full rounded border border-gray-300 px-3 py-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Prayer Request"}),e.jsx("textarea",{value:t.prayer_request,onChange:r=>n({...t,prayer_request:r.target.value}),className:"w-full rounded border border-gray-300 px-3 py-2",rows:3})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.is_answered,onChange:r=>n({...t,is_answered:r.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Is Answered"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"rounded bg-green-500 px-4 py-2 font-bold text-white hover:bg-green-700",children:u?"Update":"Create"}),e.jsx("button",{type:"button",onClick:F,className:"rounded bg-gray-500 px-4 py-2 font-bold text-white hover:bg-gray-700",children:"Cancel"})]})]})]})}),j&&e.jsx("div",{className:"mb-4 rounded border border-red-400 bg-red-100 px-4 py-3 text-red-700",children:j}),h&&e.jsx("div",{className:"py-4 text-center",children:"Loading..."}),!h&&e.jsx("div",{className:"space-y-4",children:f.length===0?e.jsx("div",{className:"py-8 text-center text-gray-500",children:"No prayer requests found."}):f.map(r=>e.jsx("div",{className:`rounded-lg border p-4 ${r.is_answered?"border-green-200 bg-green-50":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx("h3",{className:`text-lg font-semibold ${r.is_answered?"text-gray-500 line-through":""}`,children:r.prayer_request_from||"Unnamed"}),e.jsx("span",{className:"text-xl",children:r.is_answered?"âœ…":"ðŸ™"})]}),r.prayer_for&&e.jsxs("p",{className:"mb-1 text-sm text-gray-600",children:[e.jsx("strong",{children:"For:"})," ",r.prayer_for]}),r.prayer_request&&e.jsxs("p",{className:"mb-1 text-sm text-green-700",children:[e.jsx("strong",{children:"Answer:"})," ",r.prayer_request]}),e.jsx("div",{className:"text-xs text-gray-500",children:r.answered_at&&e.jsxs("span",{children:["Answered: ",new Date(r.answered_at).toLocaleDateString()]})})]}),e.jsxs("div",{className:"ml-4 flex gap-2",children:[e.jsx("button",{onClick:()=>R(r),className:"rounded bg-blue-500 px-2 py-1 text-xs text-white hover:bg-blue-700",children:"Edit"}),e.jsxs("button",{onClick:()=>$(r.id,r.is_answered),className:`rounded px-2 py-1 text-xs ${r.is_answered?"bg-yellow-500 text-white hover:bg-yellow-700":"bg-green-500 text-white hover:bg-green-700"}`,children:[r.is_answered?"Unmark":"Mark"," Answered"]}),e.jsx("button",{onClick:()=>S(r.id),className:"rounded bg-red-500 px-2 py-1 text-xs text-white hover:bg-red-700",children:"Delete"})]})]})},r.id))}),!h&&s.last_page>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(s.current_page-1),disabled:s.current_page===1,className:"rounded border border-gray-300 px-3 py-2 disabled:cursor-not-allowed disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"px-3 py-2",children:["Page ",s.current_page," of ",s.last_page]}),e.jsx("button",{onClick:()=>d(s.current_page+1),disabled:s.current_page===s.last_page,className:"rounded border border-gray-300 px-3 py-2 disabled:cursor-not-allowed disabled:opacity-50",children:"Next"})]})})]})})})})]})}export{Y as default};
//# sourceMappingURL=Index-CtAbAITc.js.map
